namespace SpaceShooter
{
    public class PowerupVulnerability : PowerupBuff
    {
        private SpaceShip target;

        private int currentShipHealth;

        protected override void OnPowerupStart(SpaceShip ship)
        {
            target = ship;

            currentShipHealth = ship.CurrentHitPoints;

            base.OnPowerupStart(ship);
        }

        protected override void Update()
        {
            target?.SetHealth(1);

            base.Update();
        }
    

        protected override void OnPowerupEnd()
        {
            target?.SetHealth(currentShipHealth);
            
            base.OnPowerupEnd();
        }
    }
}